(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{123:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(0),c=n.n(a),r=n(32),i=n.n(r),j=(n(83),n(84),n(12)),o=n.n(j),l=n(23),b=n(8),d=n(22),u=n(9),O=n(126),h=n(130),x=n(131),p=n(132),m=n(21),g=function(){var e=Object(a.useContext)(A),t=e.userData,n=e.setUserData;return Object(s.jsx)("div",{children:Object(s.jsx)(x.a,{bg:"light",expand:"lg",children:Object(s.jsxs)(O.a,{className:"header",children:[Object(s.jsx)(m.LinkContainer,{to:"/",children:Object(s.jsx)(x.a.Brand,{children:"\ud83c\udf4e WELCOME \ud83c\udf4e"})}),Object(s.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsx)(x.a.Collapse,{id:"basic-navbar-nav",children:t.user?Object(s.jsxs)(p.a,{className:"ml-auto",children:[Object(s.jsx)(m.LinkContainer,{to:"/chat",children:Object(s.jsx)(p.a.Link,{children:"Chat"})}),Object(s.jsx)(m.LinkContainer,{to:"/profile",children:Object(s.jsxs)(p.a.Link,{children:["Profile (",t.user.name,")"]})}),Object(s.jsx)(m.LinkContainer,{to:"/login",children:Object(s.jsx)(p.a.Link,{onClick:function(){n({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:"Log Out"})}),Object(s.jsx)(m.LinkContainer,{to:"/invite",children:Object(s.jsx)(p.a.Link,{children:"Invite"})})]}):Object(s.jsxs)(p.a,{className:"ml-auto",children:[Object(s.jsx)(m.LinkContainer,{to:"/register",children:Object(s.jsx)(p.a.Link,{children:"Register"})}),Object(s.jsx)(m.LinkContainer,{to:"/login",children:Object(s.jsx)(p.a.Link,{children:"Log In"})})]})})]})})})},v=n(127),f=function(){return Object(s.jsx)("div",{children:Object(s.jsxs)("center",{className:"welcome",children:[Object(s.jsx)("h1",{children:"Welcome to LetsChat"}),Object(s.jsx)("br",{}),Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Happy Chatting !!!! \u270c"})}),Object(s.jsx)("br",{}),Object(s.jsx)(v.a,{variant:"outline-light",size:"lg",active:!0,children:Object(s.jsx)(d.Link,{to:"/chat",children:" CHAT"})})]})})},k=n(25),w=n(20),y=n(76),C=n(128),S=n(129),N=n(73),L=n.n(N)()(),I=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({name:"",msg:"",room:"",isPrivate:!1}),i=Object(b.a)(r,2),j=i[0],o=i[1],l=Object(a.useState)([]),d=Object(b.a)(l,2),u=d[0],h=d[1],x=Object(a.useState)("General Chat"),p=Object(b.a)(x,2),m=p[0],g=p[1];Object(a.useEffect)((function(){L.emit("userJoin",N.user.name)}),[]);var f=Object(a.useContext)(A),N=f.userData;f.setUserData;L.on("newMessage",(function(e){h([].concat(Object(y.a)(u),[{name:e.name,msg:e.msg,isPrivate:e.isPrivate}]))})),L.on("userList",(function(e){c(e),o({name:N.user.name,msg:j.msg})}));var I=function(e){var t=m,n=e.target.textContent;g(n),L.emit("roomEntered",{oldRoom:t,newRoom:n}),h([])},D=function(e,t){var n=!1;return t.forEach((function(t){t===e&&(n=!0)})),n};return Object(s.jsx)("div",{className:"chat-ui",children:Object(s.jsx)("div",{children:Object(s.jsx)(O.a,{children:Object(s.jsxs)(C.a,{children:[Object(s.jsxs)(S.a,{xs:5,style:{border:"1px solid black"},children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Currently Connected Users:"}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("b",{children:"Click on user to chat"})]}),Object(s.jsx)("ul",{style:{listStyleType:"none"},children:n.map((function(e){return Object(s.jsx)("li",{onClick:I,style:{fontSize:"35px"},children:e},e)}))})]}),Object(s.jsxs)(S.a,{style:{border:"1px solid black"},children:[Object(s.jsxs)("div",{className:"input",id:"chatMessages",style:{border:"1px solid black"},children:["Messages",Object(s.jsx)("ul",{style:{listStyle:"none"},children:u.map((function(e,t){return Object(s.jsxs)("li",{className:"color",children:[Object(s.jsxs)("b",{children:[e.name,": "]}),Object(s.jsx)("i",{children:Object(s.jsx)("span",{style:{color:e.isPrivate?"red":"black"},children:e.msg})})]},t)}))})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("p",{children:["Chat Messages (",m,")"]}),Object(s.jsx)("div",{className:"msg-input",children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={name:j.name,msg:j.msg,room:m,isPrivate:D(m,n)};L.emit("newMessage",t),o({name:N.user.name,msg:""})},children:Object(s.jsxs)("div",{className:"msg-inside",children:[Object(s.jsx)("div",{children:Object(s.jsx)("input",{size:"40",className:"msg",type:"text",name:"msg",value:j.msg,onChange:function(e){o(Object(w.a)(Object(w.a)({},j),{},Object(k.a)({},e.target.name,e.target.value)))},required:!0,style:{width:"80%"}})}),Object(s.jsx)(v.a,{variant:"primary",type:"submit",size:"sm",children:"Send"})]})})})]})]})})})})},D=function(e){return Object(s.jsx)("div",{style:{padding:"20px",margin:"10px",border:"1px solid red"},children:Object(s.jsx)("span",{style:{color:"red"},children:Object(s.jsx)("b",{children:e.msg})})})},E=function(){var e=Object(a.useContext)(A),t=(e.userData,e.setUserData),n=Object(a.useState)({name:"",password:"",passwordAgain:""}),c=Object(b.a)(n,2),r=c[0],i=c[1],j=Object(a.useState)(),d=Object(b.a)(j,2),u=d[0],O=d[1],x=function(){var e=Object(l.a)(o.a.mark((function e(n){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,s={name:r.name,password:r.password},r.password===r.passwordAgain){e.next=8;break}return O("Enter the same password twice!"),e.abrupt("return");case 8:console.log(s);case 9:return e.next=11,h.a.post("https://mern-lets-chat.onrender.com/api/users/register",s);case 11:return e.next=13,h.a.post("https://mern-lets-chat.onrender.com/api/users/login",s);case 13:a=e.sent,t({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),i({name:"",password:"",passwordAgain:""}),window.location="/fruitlist",e.next=22;break;case 20:e.prev=20,e.t0=e.catch(1);case 22:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,n=t.name,s=t.value;i((function(e){return Object(w.a)(Object(w.a)({},e),{},Object(k.a)({},n,s))}))};return Object(s.jsx)("div",{children:Object(s.jsxs)("center",{children:[Object(s.jsx)("h1",{children:"Register Here"}),Object(s.jsx)("br",{}),u&&Object(s.jsx)(D,{msg:u}),Object(s.jsxs)("form",{onSubmit:x,children:[Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"User Name\xa0 "}),Object(s.jsx)("input",{type:"text",name:"name",value:r.name,required:!0,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"Password\xa0 "}),Object(s.jsx)("input",{type:"password",name:"password",value:r.password,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"Password Again\xa0 "}),Object(s.jsx)("input",{type:"password",name:"passwordAgain",value:r.passwordAgain,onChange:p}),Object(s.jsx)("br",{})]}),Object(s.jsx)("div",{className:"input",children:Object(s.jsx)(v.a,{variant:"primary",type:"submit",size:"lg",children:"Register User"})})]})]})})},T=function(){var e=Object(a.useContext)(A),t=(e.userData,e.setUserData),n=Object(a.useState)({name:"",password:""}),c=Object(b.a)(n,2),r=c[0],i=c[1],j=Object(a.useState)(),d=Object(b.a)(j,2),u=d[0],O=d[1],x=function(){var e=Object(l.a)(o.a.mark((function e(n){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,s={name:r.name,password:r.password},e.next=5,h.a.post("https://mern-lets-chat.onrender.com/api/users/login",s);case 5:a=e.sent,t({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),i({name:"",password:""}),window.location="/",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response.data.msg?O(e.t0.response.data.msg):O("We have an error!");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,n=t.name,s=t.value;i((function(e){return Object(w.a)(Object(w.a)({},e),{},Object(k.a)({},n,s))}))};return Object(s.jsx)("div",{children:Object(s.jsxs)("center",{children:[Object(s.jsx)("h1",{children:"Log In"}),Object(s.jsx)("br",{}),u&&Object(s.jsx)(D,{msg:u}),Object(s.jsxs)("form",{onSubmit:x,children:[Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"User Name\xa0 "}),Object(s.jsx)("input",{type:"text",name:"name",value:r.name,required:!0,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"Password\xa0 "}),Object(s.jsx)("input",{type:"password",name:"password",value:r.password,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"input",children:Object(s.jsx)(v.a,{variant:"success",type:"submit",size:"lg",children:"Log In"})})]})]})})},P=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(A),i=r.userData,j=r.setUserData;Object(a.useEffect)((function(){h.a.get("https://mern-lets-chat.onrender.com/api/fruits").then((function(e){return c(e.data)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h1",{children:["User Profile of ",i.user.name]}),Object(s.jsx)("br",{}),Object(s.jsxs)("h5",{children:[Object(s.jsx)("b",{children:"User ID: "}),i.user.id]}),Object(s.jsxs)("h5",{children:[Object(s.jsx)("b",{children:"Register Date: "}),i.user.date.toString().slice(0,10)+" @ "+i.user.date.toString().slice(11,19)]}),Object(s.jsx)("br",{}),Object(s.jsx)("ul",{style:{listStyleType:"none"},children:n.filter((function(e){if(e.addedBy===i.user.name)return e})).map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsx)(d.Link,{to:"/fruit/".concat(e._id),children:Object(s.jsx)("b",{children:e.name})})," ","(",e.amount,") - ",e.info,"\xa0[Added on"," ",Object(s.jsx)("i",{children:e.date.toString().slice(0,10)+" @ "+e.date.toString().slice(11,19)}),"]"]},e._id)}))}),Object(s.jsx)(v.a,{className:"btn btn-danger",onClick:function(){h.a.delete("https://mern-lets-chat.onrender.com/api/users/profile",{headers:{"auth-token":i.token}}).then(window.location="/fruitlist"),j({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:"Delete Account"})]})},U=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(b.a)(r,2),j=i[0],d=i[1],u=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h.a.post("https://mern-lets-chat.onrender.com/sendmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}).then((function(e){200===e.status?d("Invite Message Sent Successfully"):d("Invite Message not Sent ,please check the mail address ")}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("center",{children:Object(s.jsxs)("div",{children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)("form",{onSubmit:u,children:[Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"ENTER YOUR FRIEND'S MAIL TO INVITE THEM TO LETS CHAT"}),Object(s.jsx)("input",{type:"email",style:{width:"50%"},onChange:function(e){return c(e.target.value)}})]}),Object(s.jsx)("br",{}),Object(s.jsx)("h2",{children:j}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"input",children:Object(s.jsx)(v.a,{size:"lg",type:"submit",children:"INVITE"})})]})]})})},A=(n(123),Object(a.createContext)());var M=function(){var e=Object(a.useState)({token:void 0,user:void 0}),t=Object(b.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,h.a.post("https://mern-lets-chat.onrender.com/api/users/tokenIsValid",null,{headers:{"auth-token":t}});case 4:if(n=e.sent,console.log(n.data),!n.data){e.next=11;break}return e.next=9,h.a.get("https://mern-lets-chat.onrender.com/api/users/profile",{headers:{"auth-token":t}});case 9:s=e.sent,c({token:t,user:s.data});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.jsx)(A.Provider,{value:{userData:n,setUserData:c},children:Object(s.jsxs)(d.BrowserRouter,{children:[Object(s.jsx)(g,{}),Object(s.jsxs)(O.a,{children:[Object(s.jsx)(u.d,{path:"/",exact:!0,component:f}),Object(s.jsx)(u.d,{path:"/register",component:E}),Object(s.jsx)(u.d,{path:"/login",component:T}),Object(s.jsx)(u.d,{path:"/profile",component:P}),Object(s.jsx)(u.d,{path:"/chat",component:I}),Object(s.jsx)(u.d,{path:"/invite",component:U})]})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))},z=n(77);Object(z.a)(),i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root")),R()},83:function(e,t,n){},84:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.f7ac1b25.chunk.js.map