(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(0),c=n.n(a),r=n(31),i=n.n(r),j=(n(84),n(85),n(11)),o=n.n(j),l=n(23),b=n(7),d=n(22),u=n(6),O=n(144),h=n(13),x=n.n(h),p=n(148),m=n(149),g=n(21),f=function(){var e=Object(a.useContext)(A),t=e.userData,n=e.setUserData;return Object(s.jsx)("div",{children:Object(s.jsx)(p.a,{bg:"light",expand:"lg",children:Object(s.jsxs)(O.a,{className:"header",children:[Object(s.jsx)(g.LinkContainer,{to:"/",children:Object(s.jsx)(p.a.Brand,{children:"\ud83c\udf4e WELCOME \ud83c\udf4e"})}),Object(s.jsx)(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(s.jsx)(p.a.Collapse,{id:"basic-navbar-nav",children:t.user?Object(s.jsxs)(m.a,{className:"ml-auto",children:[Object(s.jsx)(g.LinkContainer,{to:"/chat",children:Object(s.jsx)(m.a.Link,{children:"Chat"})}),Object(s.jsx)(g.LinkContainer,{to:"/profile",children:Object(s.jsxs)(m.a.Link,{children:["Profile (",t.user.name,")"]})}),Object(s.jsx)(g.LinkContainer,{to:"/login",children:Object(s.jsx)(m.a.Link,{onClick:function(){n({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:"Log Out"})}),Object(s.jsx)(g.LinkContainer,{to:"/invite",children:Object(s.jsx)(m.a.Link,{children:"Invite"})})]}):Object(s.jsxs)(m.a,{className:"ml-auto",children:[Object(s.jsx)(g.LinkContainer,{to:"/register",children:Object(s.jsx)(m.a.Link,{children:"Register"})}),Object(s.jsx)(g.LinkContainer,{to:"/login",children:Object(s.jsx)(m.a.Link,{children:"Log In"})})]})})]})})})},v=n(145),k=function(){return Object(s.jsx)("div",{children:Object(s.jsxs)("center",{className:"welcome",children:[Object(s.jsx)("h1",{children:"Welcome to LetsChat"}),Object(s.jsx)("br",{}),Object(s.jsx)("h5",{children:Object(s.jsx)("b",{children:"Happy Chatting !!!! \u270c"})}),Object(s.jsx)("br",{}),Object(s.jsx)(v.a,{variant:"outline-light",size:"lg",active:!0,children:Object(s.jsx)(d.Link,{to:"/chat",children:" CHAT"})})]})})},w=n(25),y=n(20),C=n(78),S=n(146),N=n(147),L=n(77),I=n.n(L)()(),D=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({name:"",msg:"",room:"",isPrivate:!1}),i=Object(b.a)(r,2),j=i[0],o=i[1],l=Object(a.useState)([]),d=Object(b.a)(l,2),u=d[0],h=d[1],x=Object(a.useState)("General Chat"),p=Object(b.a)(x,2),m=p[0],g=p[1];Object(a.useEffect)((function(){I.emit("userJoin",k.user.name)}),[]);var f=Object(a.useContext)(A),k=f.userData;f.setUserData;I.on("newMessage",(function(e){h([].concat(Object(C.a)(u),[{name:e.name,msg:e.msg,isPrivate:e.isPrivate}]))})),I.on("userList",(function(e){c(e),o({name:k.user.name,msg:j.msg})}));var L=function(e){var t=m,n=e.target.textContent;g(n),I.emit("roomEntered",{oldRoom:t,newRoom:n}),h([])},D=function(e,t){var n=!1;return t.forEach((function(t){t===e&&(n=!0)})),n};return Object(s.jsx)("div",{className:"chat-ui",children:Object(s.jsx)("div",{children:Object(s.jsx)(O.a,{children:Object(s.jsxs)(S.a,{children:[Object(s.jsxs)(N.a,{xs:5,style:{border:"1px solid black"},children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Currently Connected Users:"}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("b",{children:"Click on user to chat"})]}),Object(s.jsx)("ul",{style:{listStyleType:"none"},children:n.map((function(e){return Object(s.jsx)("li",{onClick:L,style:{fontSize:"35px"},children:e},e)}))})]}),Object(s.jsxs)(N.a,{style:{border:"1px solid black"},children:[Object(s.jsxs)("div",{className:"input",id:"chatMessages",style:{border:"1px solid black"},children:["Messages",Object(s.jsx)("ul",{style:{listStyle:"none"},children:u.map((function(e,t){return Object(s.jsxs)("li",{className:"color",children:[Object(s.jsxs)("b",{children:[e.name,": "]}),Object(s.jsx)("i",{children:Object(s.jsx)("span",{style:{color:e.isPrivate?"red":"black"},children:e.msg})})]},t)}))})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("p",{children:["Chat Messages (",m,")"]}),Object(s.jsx)("div",{className:"msg-input",children:Object(s.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={name:j.name,msg:j.msg,room:m,isPrivate:D(m,n)};I.emit("newMessage",t),o({name:k.user.name,msg:""})},children:Object(s.jsxs)("div",{className:"msg-inside",children:[Object(s.jsx)("div",{children:Object(s.jsx)("input",{size:"40",className:"msg",type:"text",name:"msg",value:j.msg,onChange:function(e){o(Object(y.a)(Object(y.a)({},j),{},Object(w.a)({},e.target.name,e.target.value)))},required:!0,style:{width:"80%"}})}),Object(s.jsx)(v.a,{variant:"primary",type:"submit",size:"sm",children:"Send"})]})})})]})]})})})})},E=function(e){return Object(s.jsx)("div",{style:{padding:"20px",margin:"10px",border:"1px solid red"},children:Object(s.jsx)("span",{style:{color:"red"},children:Object(s.jsx)("b",{children:e.msg})})})},T=function(){var e=Object(a.useContext)(A),t=(e.userData,e.setUserData),n=Object(a.useState)({name:"",password:"",passwordAgain:""}),c=Object(b.a)(n,2),r=c[0],i=c[1],j=Object(a.useState)(),d=Object(b.a)(j,2),u=d[0],O=d[1],h=function(){var e=Object(l.a)(o.a.mark((function e(n){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,s={name:r.name,password:r.password},r.password===r.passwordAgain){e.next=8;break}return O("Enter the same password twice!"),e.abrupt("return");case 8:console.log(s);case 9:return e.next=11,x.a.post("https://mernchatbackend-zkx3.onrender.com/api/users/register",s);case 11:return e.next=13,x.a.post("https://mernchatbackend-zkx3.onrender.com/api/users/login",s);case 13:a=e.sent,t({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),i({name:"",password:"",passwordAgain:""}),window.location="/fruitlist",e.next=22;break;case 20:e.prev=20,e.t0=e.catch(1);case 22:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,n=t.name,s=t.value;i((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(w.a)({},n,s))}))};return Object(s.jsx)("div",{children:Object(s.jsxs)("center",{children:[Object(s.jsx)("h1",{children:"Register Here"}),Object(s.jsx)("br",{}),u&&Object(s.jsx)(E,{msg:u}),Object(s.jsxs)("form",{onSubmit:h,children:[Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"User Name\xa0 "}),Object(s.jsx)("input",{type:"text",name:"name",value:r.name,required:!0,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"Password\xa0 "}),Object(s.jsx)("input",{type:"password",name:"password",value:r.password,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"Password Again\xa0 "}),Object(s.jsx)("input",{type:"password",name:"passwordAgain",value:r.passwordAgain,onChange:p}),Object(s.jsx)("br",{})]}),Object(s.jsx)("div",{className:"input",children:Object(s.jsx)(v.a,{variant:"primary",type:"submit",size:"lg",children:"Register User"})})]})]})})},z=function(){var e=Object(a.useContext)(A),t=(e.userData,e.setUserData),n=Object(a.useState)({name:"",password:""}),c=Object(b.a)(n,2),r=c[0],i=c[1],j=Object(a.useState)(),d=Object(b.a)(j,2),u=d[0],O=d[1],h=function(){var e=Object(l.a)(o.a.mark((function e(n){var s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,s={name:r.name,password:r.password},e.next=5,x.a.post("https://mernchatbackend-zkx3.onrender.com/api/users/login",s);case 5:a=e.sent,t({token:a.data.token,user:a.data.user}),localStorage.setItem("auth-token",a.data.token),i({name:"",password:""}),window.location="/",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response.data.msg?O(e.t0.response.data.msg):O("We have an error!");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,n=t.name,s=t.value;i((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(w.a)({},n,s))}))};return Object(s.jsx)("div",{children:Object(s.jsxs)("center",{children:[Object(s.jsx)("h1",{children:"Log In"}),Object(s.jsx)("br",{}),u&&Object(s.jsx)(E,{msg:u}),Object(s.jsxs)("form",{onSubmit:h,children:[Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"User Name\xa0 "}),Object(s.jsx)("input",{type:"text",name:"name",value:r.name,required:!0,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"Password\xa0 "}),Object(s.jsx)("input",{type:"password",name:"password",value:r.password,onChange:p})]}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"input",children:Object(s.jsx)(v.a,{variant:"success",type:"submit",size:"lg",children:"Log In"})})]})]})})},P=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(A),i=r.userData,j=r.setUserData;Object(a.useEffect)((function(){x.a.get("https://mernchatbackend-zkx3.onrender.com/api/fruits").then((function(e){return c(e.data)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h1",{children:["User Profile of ",i.user.name]}),Object(s.jsx)("br",{}),Object(s.jsxs)("h5",{children:[Object(s.jsx)("b",{children:"User ID: "}),i.user.id]}),Object(s.jsxs)("h5",{children:[Object(s.jsx)("b",{children:"Register Date: "}),i.user.date.toString().slice(0,10)+" @ "+i.user.date.toString().slice(11,19)]}),Object(s.jsx)("br",{}),Object(s.jsx)("ul",{style:{listStyleType:"none"},children:n.filter((function(e){if(e.addedBy===i.user.name)return e})).map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsx)(d.Link,{to:"/fruit/".concat(e._id),children:Object(s.jsx)("b",{children:e.name})})," ","(",e.amount,") - ",e.info,"\xa0[Added on"," ",Object(s.jsx)("i",{children:e.date.toString().slice(0,10)+" @ "+e.date.toString().slice(11,19)}),"]"]},e._id)}))}),Object(s.jsx)(v.a,{className:"btn btn-danger",onClick:function(){x.a.delete("https://mernchatbackend-zkx3.onrender.com/api/users/profile",{headers:{"auth-token":i.token}}).then(window.location="/fruitlist"),j({token:void 0,user:void 0}),localStorage.setItem("auth-token","")},children:"Delete Account"})]})},U=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(b.a)(r,2),j=i[0],d=i[1],u=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/sendmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}).then((function(e){200===e.status?d("Invite Message Sent Successfully"):d("Invite Message not Sent ,please check the mail address ")}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("center",{children:Object(s.jsxs)("div",{children:[Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsxs)("form",{onSubmit:u,children:[Object(s.jsxs)("div",{className:"input",children:[Object(s.jsx)("label",{children:"ENTER YOUR FRIEND'S MAIL TO INVITE THEM TO LETS CHAT"}),Object(s.jsx)("input",{type:"email",style:{width:"50%"},onChange:function(e){return c(e.target.value)}})]}),Object(s.jsx)("br",{}),Object(s.jsx)("h2",{children:j}),Object(s.jsx)("br",{}),Object(s.jsx)("div",{className:"input",children:Object(s.jsx)(v.a,{size:"lg",type:"submit",children:"INVITE"})})]})]})})},A=(n(141),Object(a.createContext)());var M=function(){var e=Object(a.useState)({token:void 0,user:void 0}),t=Object(b.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,x.a.post("https://mernchatbackend-zkx3.onrender.com/api/users/tokenIsValid",null,{headers:{"auth-token":t}});case 4:if(n=e.sent,console.log(n.data),!n.data){e.next=11;break}return e.next=9,x.a.get("https://mernchatbackend-zkx3.onrender.com/api/users/profile",{headers:{"auth-token":t}});case 9:s=e.sent,c({token:t,user:s.data});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.jsx)(A.Provider,{value:{userData:n,setUserData:c},children:Object(s.jsxs)(d.BrowserRouter,{children:[Object(s.jsx)(f,{}),Object(s.jsxs)(O.a,{children:[Object(s.jsx)(u.d,{path:"/",exact:!0,component:k}),Object(s.jsx)(u.d,{path:"/register",component:T}),Object(s.jsx)(u.d,{path:"/login",component:z}),Object(s.jsx)(u.d,{path:"/profile",component:P}),Object(s.jsx)(u.d,{path:"/chat",component:D}),Object(s.jsx)(u.d,{path:"/invite",component:U})]})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root")),R()},84:function(e,t,n){},85:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.e55aff1e.chunk.js.map